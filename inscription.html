<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validation de formulaire</title>
</head>
<body>
    <header>
        <nav>    
            <a href="index.html">Accueil</a>
            <a href="page2.html">Collection</a>           
            <a href=page3.html>Page3</a>
            <a href=page4.html>Page4</a>
            <a href=inscription.html>Inscription</a>
            <a href=page5.html>Page5</a>
        </nav>

        <style>
            form {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                margin: 10px;
                width: 50%;
                height: 350px;
                border: 1px solid;
                border-radius: 20px;
            }
            input {
                display: flex;
                justify-content: center;

                width: 400px;
                margin-top: 10px;
                padding: 5px; /* Ajout d'un peu de padding pour le confort */
                border: 1px solid #ccc; /* Bordure par défaut */
            }
            #submit {
                width: 400px;
                margin-top: 10px;
            }
            label {
                margin-top: 10px;
            }
            .success {
                border: 1px solid rgb(35, 119, 62);
                background-color: rgb(116, 160, 50);
                color: white;
            }
            .visible {
                display: block;
                color: red; /* Couleur pour les messages d'erreur */
            }
            .error {
                display: none; /* Masquer par défaut */
             }

        
        </style>
    </header>

  
<main>  
    <form id = "form" action="" method="post" enctype="multipart/form-data">
    
        <label for="pseudo">Pseudo</label>
        <input type="text" id="pseudo" name="pseudo" required minlength="6" maxlength="8" size="10" />

        <label for="mail">Email</label>
        <input type="email" id="mail" name="email" placeholder="Entrez votre email" required />

        <label for="password">Mot de passe</label>
        <input type="password" id="password" name="password" />

        <ul id="errorList" class="error"></ul> <!-- Liste des erreurs -->
     
        <button type="submit" id="submit">Soumettre</button>  
    </form>
    
    <script>

        let form = document.querySelector('#form');
        let errorContainer = document.getElementById('errorList');

        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Empêche l'envoi du formulaire
            errorContainer.innerHTML = ''; // Réinitialiser les messages d'erreur
            

            let mail = document.getElementById('mail');
            let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Expression régulière pour valider l'email

            if (mail.value.trim() === '') { 
                console.log('Email invalide : champ vide.');
            } else if (!emailPattern.test(mail.value.trim())) {
                console.log('Mail Invalide');
            } else {
                console.log('Mail Valide')
                mail.classList.add('success');
            }
        

            let pseudo = document.querySelector('#pseudo');
            if (pseudo.value.length >= 6) { // Vérifie si le pseudo a **au moins** 6 caractères
                console.log('Pseudo Valide')
                pseudo.classList.add('success');
            } else {
                console.log('Pseudo Invalide')
                errorContainer.classList.add('visible');
                pseudo.classList.remove('success');

                let err = document.createElement('li');
                err.innerText = 'Le champ pseudo doit contenir au moins 6 caractères.';
                errorContainer.appendChild(err);
            }

              // Validation du mot de passe
              let password = document.querySelector('#password');
              let passCheck = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-+_!@#$%^&*., ?]).{10,}$");

            // Vérification du mot de passe
            if (password.value.length < 10 || !passCheck.test(password.value)) {
                console.log('Mot de Passe Invalide')
                errorContainer.classList.add('visible'); // Montre les erreurs
                errorContainer.classList.remove('error'); // Enlève la classe qui cache
                
                

                let err = document.createElement('li');
                err.innerText = 'Le mot de passe doit contenir au moins 10 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.';
                errorContainer.appendChild(err);
            } else {
                console.log('Mot de passe Valide'); // Log pour le débogage
                password.classList.add('success');
            }
        
      
        });
        </script>

      

    
</main>

</body>
</html>