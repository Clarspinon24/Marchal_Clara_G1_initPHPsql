<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validation de formulaire</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <header>
        <nav>    
            <a href="index.html">Accueil</a>
            <a href="inscription.html">Inscription</a>
            <a href="page2.html">Collection</a>        
            <a href=page3.html>Page3</a> 
            <a href=page4.html>Page4</a>
            <a href=page5.html>Page5</a>
        </nav>

        <style>
            ul{
                display:flex;
                flex-direction: row;
                
            }
            li{
                padding: 20px;
                list-style-type : none;
            }
            a{
                text-decoration: none;
            }
            .active{
                font-weight: bold;
            }

            .hide{
                display: none;
            }

            .afficher-contenu{
                display: block;
            }
            form {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                margin: 10px;
                width: 50%;
                height: 50vh ;
                border: 1px solid;
                border-radius: 20px;
                padding: 20px;
            }
            input {
                display: flex;
                justify-content: center;
                width: 90%;
                margin-top: 10px;
                padding: 5px; 
                border: 1px solid #ccc; 
            }
            #submit {
                width: 92%;
                margin-top: 10px;
                height: 10%;
            }
            label {
                margin-top: 10px;
            }
            .success {
                border: 1px solid rgb(35, 119, 62);
                background-color: rgb(116, 160, 50);
                color: white;
            }
            .invalide{
                border: 1px solid rgb(220, 58, 58);
                background-color: rgb(213, 75, 80);
                color: white;
            }
            .visible {
                display: block;
                color: red; /* Couleur pour les messages d'erreur */
            }
            .error {
                display: none; /* Masquer par défaut */
             }
            .pseudoError{
                color: red
            }

           
        </style>
    </header>

  
<main>  
           <ul>
            <li class="tableau1" >Menu1</li>
            <li class="tableau2" >Menu2</li>
           </ul> 

    <div id  ="contenu1" class="hide"> 
        <form id = "form" action="" method="post" enctype="multipart/form-data">

            <h3>Se Connecter</h3>
        
            <label for="pseudo">Pseudo</label>
            <input type="text" id="pseudo" name="pseudo"  />

            <label for="mail">Email</label>
            <input type="email" id="mail" name="email" placeholder="Entrez votre email" required />

            <label for="password">Mot de passe</label>
            <input type="password" id="password" name="password" />

            <ul id="errorList" class="error"></ul> 
            <p id="pseudoError"></p>
        
            <button type="submit" id="submit">Envoyer</button>  
        </form>
<!--   </div>--> 
 
    

    
    <script >
    
        let form = document.querySelector('#form');
        let errorContainer = document.getElementById('errorList');
        
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Empêche l'envoi du formulaire
            errorContainer.innerHTML = '';
            
        
            let mail = document.getElementById('mail');
            let mailPattern = "^ (?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-+_!@#$%^&*., ?]).+$" // Expression régulière pour valider l'email
        
            if (mail.value.trim() === '') { // verifie que le mail est vide, trim supprime les espaces blancs
                console.log('Mail invalide : champ vide.');
            } else if (!mailPattern.test(mail.value.trim())) { // vérifie si le mail n'est pas égal au pattern
                mail.classList.add('invalide'); 
                mail.classList.remove('sucess');
             
            } else {
                console.log('Mail Valide')
                mail.classList.add('success');// applique la class css success
                mail.classList.remove('invalide');
            }
        
        
            let pseudo = document.querySelector('#pseudo');
            let pseudoError = document.querySelector('#pseudoError')
        
            if (pseudo.value.length >= 6) { // Vérifie si le pseudo a **au moins** 6 caractères
                console.log('Pseudo Valide');
                errorContainer.classList.remove('visible');
                pseudo.classList.remove('Invalide');
                pseudo.classList.add('success');
        
            } else {
                errorContainer.classList.add('visible');
                pseudo.classList.add('invalide');
                pseudo.classList.remove('success');
        
                let err = document.createElement('li');
                err.innerText = 'Le champ pseudo doit contenir au moins 6 caractères.';
                errorContainer.appendChild(err);// Ajoute err dans le container pour être afficher
            }
        
              // Validation du mot de passe
              let password = document.querySelector('#password');
              let passCheck = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-+_!@#$%^&*., ?]).{10,}$");
        
            // Vérification du mot de passe
            if (password.value.length < 10 || !passCheck.test(password.value)) {
                password.classList.add('invalide');
                errorContainer.classList.add('visible'); 
                errorContainer.classList.remove('error'); 
                password.classList.remove('success');
                
                
        
                let err = document.createElement('li');//Créer une liste
                err.innerText = 'Le mot de passe doit contenir au moins 10 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.';
                errorContainer.appendChild(err);// Ajoute err dans le container pour être afficher 
            } else {
                console.log('Mot de passe Valide'); 
                password.classList.add('success');// applique la classe success qui rends le fond vert
                password.classList.remove('invalide');
            }
        
        
        });
        
        
        
        let ListMenu = document.querySelectorAll('li');
        
        
        ListMenu.forEach(item =>{
            item.addEventListener('click',function(){
                this.classList.toggle('active');
        
                if (this.classList.contains('tableau1')) {
                    document.getElementById('contenu1').classList.remove('hide')
                    document.getElementById('contenu1').classList.add('afficher-contenu')
                }
            })
        })
        
        //    let successContainer = document.querySelector('.message-success')
        //   successContainer.classList.remove('visible')
        
        //   if(pseudo.classList.contains('success')&&
        //      mail.classList.contains('success')&&
        //      password.classList.contains('success')&&
        //      passwordRepeat.classList.contains('success')
        //   ){
        //  successContainer.classList.add('visible')
        //    }
        
        </script>

      

    
</main>

</body>
</html>